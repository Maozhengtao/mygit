{'sql_skc': '\nSELECT\n\tsk.ID AS skc,\n\nIF (\n\tsp.cate3 IN (\n\t\t198,\n\t\t200,\n\t\t196,\n\t\t105,\n\t\t155,\n\t\t125,\n\t\t106,\n\t\t156,\n\t\t126,\n\t\t130,\n\t\t132,\n\t\t166,\n\t\t211,\n\t\t159,\n\t\t154,\n\t\t164,\n\t\t199,\n\t\t197,\n\t\t157,\n\t\t170\n\t),\n\tsp.cate3,\n\tsp.Cate2\n) AS cate,\n p.Price AS price,\n avg(IF(bd.`Status` IN(2, 3), 1, 0)) AS tj,\n count(DISTINCT bd.ID) AS sent_cnt\nFROM\n\tboxdetail AS bd\nINNER JOIN box AS b ON b.ID = bd.BoxID\nINNER JOIN product AS p ON p.ID = bd.ProdID\nINNER JOIN skc AS sk ON sk.ID = p.SKCID\nINNER JOIN spu AS sp ON sp.ID = P.SPUID\nWHERE\n\tbd.UPC <> 0\nAND bd.Deleted = 0\nAND b.`Status` = 5\nAND sp.cate2 NOT IN (34, 43, 49, 45)\nAND bd.userID NOT IN (\n\tSELECT\n\t\tau.userID\n\tFROM\n\t\tauthroleuser AS au\n)\nGROUP BY\n\tsk.ID\nHAVING\n\tprice > 20', 'sql_boxlog': "\nSELECT\n\tbl.SerialID,\n\tmin(bl.UpdatedDate) AS UpdatedDate\nFROM\n\tboxlog AS bl\nWHERE\n\tbl.Field = 'Status'\nAND bl.NewValue = 2\nAND bl.oldvalue = 1\nGROUP BY\n\tbl.SerialID\n\t", 'sql_sid_size': '\n\tSELECT\n\tsk.ID AS skc,\n\tps.Size,\n\tcount(DISTINCT pu.upc) AS cnt\nFROM\n\tproductupc AS pu\nINNER JOIN product AS p ON p.ID = pu.ProdID\nINNER JOIN skc AS sk ON sk.ID = p.SKCID\nINNER JOIN spu AS sp ON sp.ID = p.SPUID\nINNER JOIN spupresize AS sps ON sps.ID = p.PreSizeID\nINNER JOIN productsize AS ps ON ps.ID = sps.Size\nWHERE\n\tpu.`Status` = 1\nAND pu.Deleted = 0\nAND pu.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 3 MONTH)\nAND sp.Cate1 IN (1, 2, 3)\nAND sps.Size NOT IN (\n\tSELECT\n\t\tspi.SizeID\n\tFROM\n\t\tspecialsize AS spi\n\t\twhere deleted = 0\n)\nAND sk.ID IN (% s)\nGROUP BY\n\tsk.ID,\n\tps.Size', 'sql_stock': '\n\tSELECT\n\tsk.ID,\n\tcount(DISTINCT pu.upc) AS cnt\nFROM\n\tproductupc AS pu\nINNER JOIN product AS p ON p.ID = pu.ProdID\nINNER JOIN skc AS sk ON sk.ID = p.SKCID\nINNER JOIN spupresize AS sps ON sps.ID = p.PreSizeID\nWHERE\n\tpu.`Status` = 1\nAND pu.Deleted = 0\nAND pu.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 3 MONTH)\nAND sps.Size NOT IN (\n\tSELECT\n\t\tspi.SizeID\n\tFROM\n\t\tspecialsize AS spi\n\t\twhere deleted = 0\n)\nAND sk.ID IN (%s)\nGROUP BY\n\tsk.ID', 'sql_boxcnt': '\n\tSELECT\n\tround(avg(r.cnt)) AS boxcnt\nFROM\n\t(\n\t\tSELECT\n\t\t\tdate(b.CreatedDate) AS date,\n\t\t\tcount(DISTINCT b.ID) AS cnt\n\t\tFROM\n\t\t\tbox AS b\n\t\tWHERE\n\t\t\tb.Deleted = 0\n\t\tAND date(b.CreatedDate) >= DATE_SUB(CURDATE(), INTERVAL 7 DAY)\n\t\tAND WEEKDAY(b.CreatedDate) NOT IN (5, 6)\n\t\tGROUP BY\n\t\t\tdate\n\t) AS r', 'sql_skc_item': "\n\tSELECT\n\tr.cate,\n\tpc. NAME AS 品类名,\n\tr.skc,\n\tr.品牌,\n\tr.负责人,\n\tr.商品名,\n\tr.价格,\n\tr.推荐率,\n\tr.在库库存,\n\tr.空中库存,\n\tr.近三十天发出\nFROM\n\t(\n\t\tSELECT\n\t\t\tsp.Cate1 AS cate,\n\n\t\tIF (\n\t\t\tsp.cate3 IN (\n\t\t\t\t198,\n\t\t\t\t200,\n\t\t\t\t196,\n\t\t\t\t105,\n\t\t\t\t155,\n\t\t\t\t125,\n\t\t\t\t106,\n\t\t\t\t156,\n\t\t\t\t126,\n\t\t\t\t130,\n\t\t\t\t132,\n\t\t\t\t166,\n\t\t\t\t211,\n\t\t\t\t159,\n\t\t\t\t154,\n\t\t\t\t164,\n\t\t\t\t199,\n\t\t\t\t197,\n\t\t\t\t157,\n\t\t\t\t170\n\t\t\t),\n\t\t\tsp.cate3,\n\t\t\tsp.Cate2\n\t\t) AS cate_1,\n\t\tsk.ID AS skc,\n\t\tpb. NAME AS 品牌,\n\t\tpb.ChargePerson AS 负责人,\n\t\tp.`Name` AS '商品名',\n\t\tp.price AS '价格',\n\t\tt.tj AS '推荐率',\n\t\tifnull(c.stock, 0) AS '在库库存',\n\t\tifnull(a.`空中库存`, 0) AS '空中库存',\n\t\tIFNULL(d.cnt, 0) AS '近三十天发出'\n\tFROM\n\t\tproductupc AS pu\n\tINNER JOIN product AS p ON p.ID = pu.ProdID\n\tINNER JOIN skc AS sk ON sk.Id = p.SKCID\n\tINNER JOIN spu AS sp ON sp.ID = p.SPUID\n\tINNER JOIN productbrand AS pb ON pb.ID = sp.Brand\n\t#INNER JOIN USER AS u ON u.ID = pb.ChargePerson\n\tLEFT JOIN (\n\t\tSELECT\n\t\t\tsk.ID,\n\t\t\tcount(DISTINCT pu.upc) AS stock\n\t\tFROM\n\t\t\tproductupc AS pu\n\t\tINNER JOIN product AS p ON p.ID = pu.ProdID\n\t\tINNER JOIN skc AS sk ON sk.ID = p.skcID\n\t\tWHERE\n\t\t\tpu.Deleted = 0\n\t\tAND pu.`Status` = 1\n\t\tGROUP BY\n\t\t\tsk.ID\n\t) AS c ON c.id = sk.id\n\tLEFT JOIN (\n\t\tSELECT\n\t\t\tsk.ID AS skc,\n\t\t\tcount(DISTINCT bd.ID) AS 空中库存\n\t\tFROM\n\t\t\tboxdetail AS bd\n\t\tINNER JOIN product AS p ON p.ID = bd.ProdID\n\t\tINNER JOIN box AS b ON b.ID = bd.BoxID\n\t\tINNER JOIN productupc AS pu ON pu.ProdID = p.ID\n\t\tINNER JOIN skc AS sk ON sk.ID = p.SKCID\n\t\tWHERE\n\t\t\tb. STATUS = 7\n\t\tAND bd.Deleted = 0\n\t\tAND bd.upc <> 0\n\t\tAND bd. STATUS = 6\n\t\tGROUP BY\n\t\t\tsk.ID\n\t) AS a ON a.skc = sk.ID\n\tLEFT JOIN (\n\t\tSELECT\n\t\t\tsk.ID AS skc,\n\t\t\tcount(DISTINCT bd.ID) AS cnt\n\t\tFROM\n\t\t\tboxdetail AS bd\n\t\tINNER JOIN product AS p ON p.ID = bd.ProdID\n\t\tINNER JOIN skc AS sk ON sk.ID = p.SKCID\n\t\tWHERE\n\t\t\tbd.Deleted = 0\n\t\tAND bd.UPC <> 0\n\t\tAND bd.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 30 DAY)\n\t\tGROUP BY\n\t\t\tskc\n\t) AS d ON d.skc = sk.ID\n\tLEFT JOIN (\n\t\tSELECT\n\t\t\tp.SKCID,\n\t\t\tavg(IF(bd.`Status` IN(2, 3), 1, 0)) AS tj\n\t\tFROM\n\t\t\tboxdetail AS bd\n\t\tINNER JOIN box AS b ON b.ID = bd.boxID\n\t\tINNER JOIN product AS p ON p.ID = bd.ProdID\n\t\tWHERE\n\t\t\tbd.Deleted = 0\n\t\tAND bd.UPC <> 0\n\t\tAND b. STATUS = 5\n\t\tAND b.deleted = 0\n\t\tGROUP BY\n\t\t\tp.SKCID\n\t) AS t ON t.SKCID = sk.ID\n\tWHERE\n\t\tp.Deleted = 0\n\tAND pb.Deleted = 0\n\tAND sk.Deleted = 0\n\tAND sp.Deleted = 0\n\tAND pu.Deleted = 0\n\tAND sk.ID IN (% s) #and sk.id = \t10280\n\tGROUP BY\n\t\tsk.ID\n\t) AS r\nINNER JOIN productcate AS pc ON pc.ID = r.cate_1", 'boxdetail_sql': '\n\tSELECT\n\nIF (\n\tsp.cate3 IN (\n\t\t198,\n\t\t200,\n\t\t196,\n\t\t105,\n\t\t155,\n\t\t125,\n\t\t106,\n\t\t156,\n\t\t126,\n\t\t130,\n\t\t132,\n\t\t166,\n\t\t211,\n\t\t159,\n\t\t154,\n\t\t164,\n\t\t199,\n\t\t197,\n\t\t157,\n\t\t170\n\t),\n\tsp.cate3,\n\tsp.Cate2\n) AS cate_1,\n bd.Price AS price,\n sk.ID AS skc,\n bd.BoxID,\n bd.CreatedDate AS datetime\nFROM\n\tboxdetail AS bd\nINNER JOIN product AS p ON p.ID = bd.ProdID\nINNER JOIN skc AS sk ON sk.ID = p.SKCID\nINNER JOIN spu AS sp ON sp.ID = p.SPUID\nWHERE\n\tbd.Deleted = 0\nAND bd.UPC <> 0\nAND bd.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 2 MONTH)\n', 'skcchange_sql': "\nSELECT\n\tspi.SKCID AS skc,\n\tspi.Common AS 'type',\n\tspi.CreatedDate AS datetime\nFROM\n\tspecialinventory AS spi\nWHERE\n\tspi.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)\nGROUP BY\n\tskc,\n\tdatetime", 'sql_newskc': '\nSELECT\n\tr.ID AS skc\nFROM\n\t(\n\t\tSELECT\n\t\t\tsk.ID,\n\t\t\tmin(pi.CreatedDate) AS min\n\t\tFROM\n\t\t\tproductinventory AS pi\n\t\tINNER JOIN product AS p ON p.ID = pi.ProdID\n\t\tINNER JOIN skc AS sk ON sk.ID = p.SKCID\n\t\tWHERE\n\t\t\tpi.Type = 0\n\t\tAND pi.Deleted = 0\n\t\tGROUP BY\n\t\t\tsk.ID\n\t\tHAVING\n\t\t\tmin >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)\n\t) AS r', 'sql_newskc_item': "\nSELECT\n\tsk.ID AS skc,\n\tpb. NAME AS '品牌',\n\tpb.ChargePerson AS '负责人',\n\tp. NAME AS '商品名',\n\tDATE(min(pi.CreatedDate)) AS '最近入库时间',\n\tcount(pi.UPC) AS '入库数量',\n\tifnull(r2.cnt, 0) AS '7天内发出次数'\nFROM\n\tproductinventory AS pi\nINNER JOIN product AS p ON p.ID = pi.ProdID\nINNER JOIN skc AS sk ON sk.ID = p.SKCID\nINNER JOIN spu AS sp ON sp.ID = p.SPUID\nINNER JOIN productbrand AS pb ON pb.ID = sp.Brand\nLEFT JOIN (\n\tSELECT\n\t\tsk.ID,\n\t\tcount(DISTINCT bd.ID) AS cnt\n\tFROM\n\t\tproductinventory AS pi\n\tINNER JOIN product AS p ON p.ID = pi.ProdID\n\tINNER JOIN skc AS sk ON sk.ID = p.SKCID\n\tINNER JOIN (\n\t\tSELECT\n\t\t\tsk.ID,\n\t\t\tmin(pi.CreatedDate) AS min\n\t\tFROM\n\t\t\tproductinventory AS pi\n\t\tINNER JOIN product AS p ON p.ID = pi.ProdID\n\t\tINNER JOIN skc AS sk ON sk.ID = p.SKCID\n\t\tWHERE\n\t\t\tpi.Type = 0\n\t\tAND pi.Deleted = 0\n\t\tGROUP BY\n\t\t\tsk.ID\n\t\tHAVING\n\t\t\tmin >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)\n\t) AS r1 ON r1.ID = sk.ID\n\tLEFT JOIN boxdetail AS bd ON bd.UPC = pi.UPC\n\tWHERE\n\t\tpi.Type = 0\n\tAND pi.CreatedDate >= r1.min\n\tAND bd.UPC <> 0\n\tAND bd.Deleted = 0\n\tAND bd.CreatedDate >= pi.CreatedDate\n\tAND bd.CreatedDate <= DATE_ADD(\n\t\tpi.CreatedDate,\n\t\tINTERVAL 7 DAY\n\t)\n\tAND bd.UserID NOT IN (\n\t\tSELECT\n\t\t\tau.userID\n\t\tFROM\n\t\t\tauthroleuser AS au\n\t)\n\tGROUP BY\n\t\tsk.ID\n) AS r2 ON r2.ID = sk.ID\nWHERE\n\tpi.Type = 0\nAND pi.Deleted = 0\nGROUP BY\n\tsk.ID\nHAVING\n\t最近入库时间 >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)\n", 'sql_skc_stop': '\nSELECT\n\todp.SKCID\nFROM\n\t`order` AS od\nINNER JOIN orderproduct AS odp ON odp.OrderID = od.ID\nLEFT JOIN productinventory AS pi ON pi.SKCID = odp.SKCID\nAND pi.CreatedDate > odp.CreatedDate\nWHERE\n\tod.Type = 1\nAND od.Deleted = 0\nAND odp.Deleted = 1\nAND pi.SKCID IS NULL\nUNION\n\tSELECT\n\t\tsk.ID AS skc\n\tFROM\n\t\tskc AS sk\n\tLEFT JOIN productinventory AS pi ON pi.SKCID = sk.ID\n\tAND pi.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)\n\tWHERE\n\t\tsk.Note LIKE "%停产%"\n\tAND pi.skcID IS NULL\n', 'sql_size_trans': '\nSELECT\n\tp.ID as sku,\n\tsk.ID AS skc,\n\tps.size AS size_a,\n\tsps.Size AS size_a_ID,\n\tcs.size AS size_b,\n\tsps.Size1 AS size_b_ID,\n\tifnull(r.sale_rate,0) as sale_rate\nFROM\n\tproduct AS p\nINNER JOIN skc AS sk ON sk.ID = p.SKCID\nINNER JOIN spupresize AS sps ON sps.ID = p.PreSizeID\nINNER JOIN productsize AS ps ON sps.Size = ps.ID\nINNER JOIN collarsize AS cs ON cs.ID = sps.Size1\nLEFT JOIN (\n\tSELECT\n\t\tp.ID,\n\t\tsum(IF(pu.`Status` = 3, 1, 0)) / count(DISTINCT pi.upc) AS sale_rate\n\tFROM\n\t\tproductinventory AS pi\n\tINNER JOIN product AS p ON p.ID = pi.ProdID\n\tINNER JOIN productupc AS pu ON pu.UPC = pi.UPC\n\tWHERE\n\t\tpi.Type IN (0, 2)\n\tAND pi.Deleted = 0\n\tAND p.SKCID = %s\n\tGROUP BY\n\t\tp.ID\n) AS r ON r.ID = p.ID\nWHERE\n\tsk.ID = %s\nAND p.Deleted = 0\nAND sps.Deleted = 0\nAND sps.Size NOT IN (\n\tSELECT\n\t\tspi.SizeID\n\tFROM\n\t\tspecialsize AS spi \n\twhere  deleted = 0 \n)\n', 'sql_aim_skc': '\nSELECT\n\t0 AS IsNew,\n\tsp.ID AS SPUID,\n\tsk.ID AS SKCID,\n\tp.ID AS SKUID,\n\tsp.SerialNumber,\n\tsp.Brand AS Brand,\n\tp.PurchPrice,\n\t"" AS PurchaseNum,\n\tdate_format(DATE_ADD(CURDATE(), INTERVAL 30 DAY),\'%%Y-%%m-%%d\') AS DeliveryDate,\n\tsp.cate1 AS Cate1\nFROM\n\tproduct AS p\nINNER JOIN skc AS sk ON sk.ID = p.SKCID\nINNER JOIN spu AS sp ON sp.ID = p.SPUID\nINNER JOIN spupresize AS sps ON sps.SPUID = p.SPUID\nWHERE\n\tsk.id = %s\nGROUP BY\n\tsk.id\n', 'sql_order_cnt': '\nSELECT\n\tod.ID,\n\todp.SKUID,\n\tsum(odp.PurchaseNum) AS order_cnt\nFROM\n\t`order` AS od\nINNER JOIN orderproduct AS odp ON odp.OrderID = od.ID\nWHERE\n\tod.`Status` in (1,2,4,5)\nAND od.Deleted = 0\nAND odp.Deleted = 0\nAND odp.DeliveryDate < DATE_ADD(CURDATE(), INTERVAL 1 MONTH)\nGROUP BY\n\todp.SKUID\n', 'RecommendSizeBottom_1': '\nSELECT\n  u.RecommendSizeBottom AS \'cate2\'\nFROM\n  USER AS u\nWHERE\n  u.Deposit = 2\nAND u.Deleted = 0\nAND u.RecommendSizeBottom != \'0\'\nAND u.RecommendSizeBottom != "该用户相近用户的尺码太平均，请联系错过 记录该用户信息" \n', 'RecommendSizeTop_1': '\nSELECT\n  replace(u.RecommendSizeTop,\' \',\'\') AS \'cate1\'\nFROM\n  USER AS u\nWHERE\n  u.Deposit = 2\nAND u.Deleted = 0\nAND RecommendSizeTop not like "%% %%"\nAND RecommendSizeTop != "0"\n', 'RecommendSizeShoes_1': '\nSELECT\n\t3 AS cate,\n\tps.Size AS size1,\n\tcount(DISTINCT bd.ID) AS rate\nFROM\n\tboxdetail AS bd\nINNER JOIN product AS p ON p.ID = bd.ProdID\nINNER JOIN spu AS sp ON sp.ID = p.SPUID\nINNER JOIN spupresize AS sps ON sps.ID = p.PreSizeID\nINNER JOIN productsize AS ps ON ps.ID = sps.Size\nWHERE\n\tsp.cate1 = 3\nAND sps.Size NOT IN (\n\tSELECT\n\t\tSizeID\n\tFROM\n\t\tspecialsize\n\twhere deleted = 0\n)\nAND bd.`Status` IN (2, 3)\nand bd.Deleted = 0 \nand bd.UPC <> 0 \nAND bd.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 6 MONTH)\nGROUP BY\n\tps.Size\n', 'RecommendSizeSuit_1': '\nSELECT\n\t5 AS cate,\n\tps.Size AS size1,\n\tcount(DISTINCT bd.ID) AS rate\nFROM\n\tboxdetail AS bd\nINNER JOIN product AS p ON p.ID = bd.ProdID\nINNER JOIN spu AS sp ON sp.ID = p.SPUID\nINNER JOIN spupresize AS sps ON sps.ID = p.PreSizeID\nINNER JOIN productsize AS ps ON ps.ID = sps.Size\nWHERE\n\tsp.cate1 = 5\nAND sps.Size NOT IN (\n\tSELECT\n\t\tSizeID\n\tFROM\n\t\tspecialsize \n\twhere deleted = 0\n)\nAND bd.`Status` IN (2, 3)\nand bd.Deleted = 0 \nand bd.UPC <> 0 \nAND bd.CreatedDate >= DATE_SUB(CURDATE(), INTERVAL 6 MONTH)\nGROUP BY\n\tps.Size\n', 'sql_s_skc_record': "\nSELECT\n\tcount(DISTINCT r.skc) AS skc_cnt,\n\tsum(r.S_skc) AS s_stock_cnt,\n\tsum(IF(r.S_skc = 1, r.stock, 0)) / sum(r.S_skc) AS s_avg_stock,\n\tdate(\n\t\tDATE_SUB(CURDATE(), INTERVAL 1 DAY)\n\t) AS date\nFROM\n\t(\n\t\tSELECT\n\t\t\tp.SKCID AS skc,\n\t\t\tcount(DISTINCT pu.upc) AS stock,\n\n\t\tIF (p.SKCID IN(% s), 1, 0) AS 'S_skc'\n\t\tFROM\n\t\t\tproductupc AS pu\n\t\tINNER JOIN product AS p ON p.ID = pu.ProdID\n\t\tINNER JOIN (\n\t\t\tSELECT\n\t\t\t\tP.SKCID\n\t\t\tFROM\n\t\t\t\tboxdetail AS bd\n\t\t\tINNER JOIN product AS p ON p.ID = bd.ProdID\n\t\t\tWHERE\n\t\t\t\tbd.Deleted = 0\n\t\t\tAND bd.`Status` IN (2, 3)\n\t\t\tAND bd.UPC <> 0\n\t\t\tGROUP BY\n\t\t\t\tp.SKCID\n\t\t) AS r ON r.SKCID = p.SKCID\n\t\tWHERE\n\t\t\tpu.`Status` = 1\n\t\tAND pu.Deleted = 0\n\t\tGROUP BY\n\t\t\tp.SKCID\n\t) AS r\n"}